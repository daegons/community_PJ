{"ast":null,"code":"import _slicedToArray from\"C:/Users/qzom1/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/coding/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useNavigate,useParams}from'react-router-dom';import axios from'axios';import{UploadButtonDiv,UploadDiv,UploadForm}from'../../Style/UploadCSS';import ImageUpload from'./ImageUpload';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Edit=function Edit(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),postDetil=_useState2[0],setPostDetail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];// const [Image, setImage] = useState(\"\");\n//현재 페이지 id 때문..\nvar params=useParams();var navigate=useNavigate();useEffect(function(){var body={postNum:params.postNum};axios.post('/api/post/detail',body).then(function(res){if(res.data.success){setPostDetail(res.data.post);}}).catch(function(err){console.log(err);});},[]);useEffect(function(){setTitle(postDetil.title);setContent(postDetil.content);// setImage(postDetil.image);\n},[postDetil]);var onSubmit=function onSubmit(e){e.preventDefault();if(title===''||content===''){return alert('위 아래 위위 아래 채워주세요');}var body={title:title,content:content,postNum:params.postNum// image: Image,\n};axios.post('/api/post/edit',body).then(function(res){if(res.data.success){alert('글 수정이 완료되었습니다.✔');navigate(\"/post/\".concat(params.postNum));}else{alert('글 수정에 실패하였습니다.❌');}}).catch(function(err){console.log(err);});};var onBack=function onBack(e){e.preventDefault();navigate(-1);};return/*#__PURE__*/_jsx(UploadDiv,{children:/*#__PURE__*/_jsxs(UploadForm,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"input\",{id:\"title\",type:\"text\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(ImageUpload,{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"content\",type:\"text\",value:content,onChange:function onChange(e){return setContent(e.target.value);}}),/*#__PURE__*/_jsxs(UploadButtonDiv,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:onBack,className:\"cancel\",children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onSubmit,children:\"\\uC81C\\uCD9C\"})]})]})});};export default Edit;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useParams","axios","UploadButtonDiv","UploadDiv","UploadForm","ImageUpload","jsx","_jsx","jsxs","_jsxs","Edit","_useState","_useState2","_slicedToArray","postDetil","setPostDetail","_useState3","_useState4","title","setTitle","_useState5","_useState6","content","setContent","params","navigate","body","postNum","post","then","res","data","success","catch","err","console","log","onSubmit","e","preventDefault","alert","concat","onBack","children","htmlFor","id","type","value","onChange","target","onClick","className"],"sources":["C:/Users/qzom1/OneDrive/바탕 화면/coding/client/src/Component/Post/Edit.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { UploadButtonDiv, UploadDiv, UploadForm } from '../../Style/UploadCSS';\r\nimport ImageUpload from './ImageUpload';\r\n\r\nconst Edit = () => {\r\n  const [postDetil, setPostDetail] = useState({});\r\n  const [title, setTitle] = useState('');\r\n  const [content, setContent] = useState('');\r\n  // const [Image, setImage] = useState(\"\");\r\n\r\n  //현재 페이지 id 때문..\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const body = {\r\n      postNum: params.postNum,\r\n    };\r\n    axios\r\n      .post('/api/post/detail', body)\r\n      .then((res) => {\r\n        if (res.data.success) {\r\n          setPostDetail(res.data.post);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setTitle(postDetil.title);\r\n    setContent(postDetil.content);\r\n    // setImage(postDetil.image);\r\n  }, [postDetil]);\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (title === '' || content === '') {\r\n      return alert('위 아래 위위 아래 채워주세요');\r\n    }\r\n    let body = {\r\n      title: title,\r\n      content: content,\r\n      postNum: params.postNum,\r\n      // image: Image,\r\n    };\r\n\r\n    axios\r\n      .post('/api/post/edit', body)\r\n      .then((res) => {\r\n        if (res.data.success) {\r\n          alert('글 수정이 완료되었습니다.✔');\r\n          navigate(`/post/${params.postNum}`);\r\n        } else {\r\n          alert('글 수정에 실패하였습니다.❌');\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const onBack = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  return (\r\n    <UploadDiv>\r\n      <UploadForm>\r\n        <label htmlFor=\"title\">제목</label>\r\n        <input\r\n          id=\"title\"\r\n          type=\"text\"\r\n          value={title}\r\n          onChange={(e) => setTitle(e.target.value)}\r\n        />\r\n        <ImageUpload />\r\n        <label htmlFor=\"content\">내용</label>\r\n        <textarea\r\n          id=\"content\"\r\n          type=\"text\"\r\n          value={content}\r\n          onChange={(e) => setContent(e.target.value)}\r\n        />\r\n        <UploadButtonDiv>\r\n          <button onClick={onBack} className=\"cancel\">\r\n            취소\r\n          </button>\r\n          <button onClick={onSubmit}>제출</button>\r\n        </UploadButtonDiv>\r\n      </UploadForm>\r\n    </UploadDiv>\r\n  );\r\n};\r\n\r\nexport default Edit;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}