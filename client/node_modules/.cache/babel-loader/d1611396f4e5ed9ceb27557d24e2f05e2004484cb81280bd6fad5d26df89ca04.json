{"ast":null,"code":"import _slicedToArray from\"C:/Users/qzom1/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/coding/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link,useNavigate,useParams}from'react-router-dom';import axios from'axios';//아래 두개 스피너\n// import Loading from './../assets/Spinner';\nimport Loading1 from'../assets/Loading';import{BtnDiv,Post,PostDiv}from'../../Style/PostDetailCSS';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Detail=function Detail(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),postDetil=_useState2[0],setPostDetail=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loaded=_useState4[0],setLoaded=_useState4[1];var navigate=useNavigate();//현재 페이지 id 때문..\nvar params=useParams();useEffect(function(){// console.log(params.postNum); //post id값 ex)1\nvar body={//let body =\npostNum:params.postNum};axios.post('/api/post/detail',body).then(function(res){if(res.data.success){setTimeout(function(){setPostDetail(res.data.post);setLoaded(true);},1000);}}).catch(function(err){console.log(err);});},[]);useEffect(function(){console.log(postDetil);},[postDetil]);var deleteHandler=function deleteHandler(){if(window.confirm('정말로 삭제하시겠습니까?')){// console.log(params.postNum); //post id값 ex)1\nvar body={//let body =\npostNum:params.postNum};axios.post('/api/post/delete',body).then(function(res){if(res.data.success){alert('게시글이 삭제되었습니다.');setLoaded(false);setTimeout(function(){setLoaded(true);navigate('/');},1000);}}).catch(function(err){alert('게시글이 삭제 실패되었습니다.');});}};return/*#__PURE__*/_jsx(PostDiv,{children:loaded?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Post,{children:[/*#__PURE__*/_jsx(\"h2\",{children:postDetil.title}),postDetil.image?/*#__PURE__*/_jsx(\"img\",{//배포하면 배포 환경에 맞게 주소 수정해야됨\nsrc:\"http://localhost:5000/\".concat(postDetil.image),alt:\"\\uC774\\uBBF8\\uC9C0\",style:{width:'100%',height:'auto'}}):null,/*#__PURE__*/_jsx(\"p\",{children:postDetil.content})]}),/*#__PURE__*/_jsxs(BtnDiv,{children:[/*#__PURE__*/_jsx(Link,{to:\"/edit/\".concat(postDetil.postNum),children:/*#__PURE__*/_jsx(\"button\",{className:\"edit\",children:\"\\uC218\\uC815\"})}),/*#__PURE__*/_jsx(Link,{children:/*#__PURE__*/_jsx(\"button\",{onClick:deleteHandler,className:\"delete\",children:\"\\uC0AD\\uC81C\"})})]})]}):/*#__PURE__*/ // <Loading /> //1스피너\n_jsx(Loading1,{})//2스피너\n});};export default Detail;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","useParams","axios","Loading1","BtnDiv","Post","PostDiv","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Detail","_useState","_useState2","_slicedToArray","postDetil","setPostDetail","_useState3","_useState4","loaded","setLoaded","navigate","params","body","postNum","post","then","res","data","success","setTimeout","catch","err","console","log","deleteHandler","window","confirm","alert","children","title","image","src","concat","alt","style","width","height","content","to","className","onClick"],"sources":["C:/Users/qzom1/OneDrive/바탕 화면/coding/client/src/Component/Post/Detail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, useNavigate, useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\n//아래 두개 스피너\r\n// import Loading from './../assets/Spinner';\r\nimport Loading1 from '../assets/Loading';\r\nimport { BtnDiv, Post, PostDiv } from '../../Style/PostDetailCSS';\r\n\r\nconst Detail = () => {\r\n  const [postDetil, setPostDetail] = useState({});\r\n  const [loaded, setLoaded] = useState(false);\r\n  const navigate = useNavigate();\r\n  //현재 페이지 id 때문..\r\n  const params = useParams();\r\n  useEffect(() => {\r\n    // console.log(params.postNum); //post id값 ex)1\r\n    const body = {\r\n      //let body =\r\n      postNum: params.postNum,\r\n    };\r\n    axios\r\n      .post('/api/post/detail', body)\r\n      .then((res) => {\r\n        if (res.data.success) {\r\n          setTimeout(() => {\r\n            setPostDetail(res.data.post);\r\n            setLoaded(true);\r\n          }, 1000);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(postDetil);\r\n  }, [postDetil]);\r\n\r\n  const deleteHandler = () => {\r\n    if (window.confirm('정말로 삭제하시겠습니까?')) {\r\n      // console.log(params.postNum); //post id값 ex)1\r\n      const body = {\r\n        //let body =\r\n        postNum: params.postNum,\r\n      };\r\n      axios\r\n        .post('/api/post/delete', body)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            alert('게시글이 삭제되었습니다.');\r\n            setLoaded(false);\r\n            setTimeout(() => {\r\n              setLoaded(true);\r\n              navigate('/');\r\n            }, 1000);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          alert('게시글이 삭제 실패되었습니다.');\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <PostDiv>\r\n      {loaded ? (\r\n        <>\r\n          <Post>\r\n            <h2>{postDetil.title}</h2>\r\n            {postDetil.image ? (\r\n              <img\r\n                //배포하면 배포 환경에 맞게 주소 수정해야됨\r\n                src={`http://localhost:5000/${postDetil.image}`}\r\n                alt=\"이미지\"\r\n                style={{ width: '100%', height: 'auto' }}\r\n              />\r\n            ) : null}\r\n\r\n            <p>{postDetil.content}</p>\r\n          </Post>\r\n          <BtnDiv>\r\n            <Link to={`/edit/${postDetil.postNum}`}>\r\n              <button className=\"edit\">수정</button>\r\n            </Link>\r\n            <Link>\r\n              <button onClick={deleteHandler} className=\"delete\">\r\n                삭제\r\n              </button>\r\n            </Link>\r\n          </BtnDiv>\r\n        </>\r\n      ) : (\r\n        // <Loading /> //1스피너\r\n        <Loading1 /> //2스피너\r\n      )}\r\n    </PostDiv>\r\n  );\r\n};\r\n\r\nexport default Detail;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}